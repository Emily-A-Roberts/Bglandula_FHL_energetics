{
  "hash": "8ddc1f303ed4729af658560a3af35139",
  "result": {
    "markdown": "---\ntitle: \"subtidal experiment\"\nformat: html\neditor: visual\n---\n\n\n# Original file\n\n/Users/mollylime/Library/CloudStorage/Box-Box/Sarah and Molly's Box/FHL data/code_archive/All_togetherOperculum growth data/Model_LisaData_20201202_FR_changes_exp_1.88.R\n\nThe last edit was from 12/11/2020\n\n### Read in growth data\n\nOriginal location:\n\nsetwd(\"\\~/Box/Sarah and Molly's Box/FHL data/Lisa data\")\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrowth <- read.csv(here::here(\"data/subtidal_data/Lisa_growth.csv\"), stringsAsFactors = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in read.table(file = file, header = header, sep = sep, quote = quote, :\nincomplete final line found by readTableHeader on\n'/Users/mollylime/Documents/GitHub/Bglandula_FHL_energetics/data/subtidal_data/Lisa_growth.csv'\n```\n:::\n\n```{.r .cell-code}\nplot(growth$Init_operc, growth$Final_operc-growth$Init_operc, xlim = c(0,2), ylim = c(0,2.5))\n```\n\n::: {.cell-output-display}\n![](subtidal_experiment_model_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\nTimepoint_1 <- as.POSIXct( \"7/19/11\", format=\"%m/%d/%y\", tz = \"GMT\")\nTimepoint_2 <- as.POSIXct( \"8/25/11\", format=\"%m/%d/%y\", tz = \"GMT\")\n\ngrowth$len_1 <- growth$Init_operc\ngrowth$len_2 <- growth$Final_operc\n```\n:::\n\n\nThis file also includes the tissue mass, but this isn't used in this model. This is a size-based model.\n\n\n\n\n\n### Read in food data\n\nNo chlorophyll in 2011 dataset.\n\nWe are using a 3-year average to estimate approximate chlorophyll at the time that this growth study was performed.\n\nThere is POM data, but we don't have POM data for the full intertidal experiment to compare it to. We tried a few methods. I'm including the commented out code below.\n\n\n::: {.cell}\n\n:::\n\n\nSet parameters\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFH <- 1\nIJ <- 1\n```\n:::\n\n\nRead in chl data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: timechange\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lubridate'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidyr)\nPB <- read.csv(here::here(\"data/environmental_data/PDBGSWQ_dataonly.csv\"), stringsAsFactors = FALSE)\n\nPB$datetime <-as.POSIXct(PB$m.d.y.hh.mm, format = \"%m/%d/%y %H:%M\")\n\n#subset to only include the past 3 years...\n\n# plot(PB$datetime, PB$ug.l, pch = \".\")\nPB_subset <- PB[PB$datetime > as.Date(\"2017-01-01\") & PB$datetime < as.Date(\"2020-01-01\"),]\nPB <- PB_subset\n\n#plot(PB$datetime, PB$ug.l, pch = \".\")\n\nvars <-\"m.d.y.hh.mm\"\ndat <- PB %>% \n  drop_na(ug.l, any_of(vars))%>%\n  dplyr::group_by(time = week(datetime)) %>% \n  dplyr::summarise(value = mean(ug.l, na.rm = TRUE), .groups = 'keep')\n#dat\nplot(dat, type = 'b', ylab = \"fluorescence (ug/L)\", xlab = \"week\")\n```\n\n::: {.cell-output-display}\n![](subtidal_experiment_model_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nThe week this subtidal experiment performed in was Wk 30 - 35,\n\nNote: \\~5ug/L (would be considered above saturating for mussels), and the mean is 6.9.\n\nWe used a 2 week lag between food availability and growth, so we took the average of weeks 28 to 33. (Weeks 28-35 are plotted below).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Just averaging of this full timeperiod, including a 2 week lag.\nplot(dat[28:35,], ylim = c(0,10))\nabline(h = mean(dat$value[28:33]))\n```\n\n::: {.cell-output-display}\n![](subtidal_experiment_model_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Food value ####\n(FoodLevel_ug_L <- mean(dat$value[28:33]))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6.926391\n```\n:::\n:::\n\n\n### Temperature\n\nCreate a dataframe for predictions\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntemp.num <- length(growth$Temp)\npred.dat.aqua <- data.frame(\n  Temp.n = growth$Temp,\n  Food.n = FoodLevel_ug_L,\n  OperculumLength = growth$len_1,\n  sizeclass = as.factor(rep(c(\"all\"),each = temp.num))\n)\n```\n:::\n\n\nModel Run\n\nThere are more code in the original file, but it says elsewhere that this is outdated code and the model setup code to be used is from the model_setup file.\n",
    "supporting": [
      "subtidal_experiment_model_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}